<html>

<head>
	
	<meta charset="utf-8" />
	<meta name=“viewport” content=“width=device-width, initial-scale=1.0”>
	<meta http-equiv=“X-UA-Compatible” content=“ie=edge”>

	<!--Default styling for SuperBuilder content-->
	<link rel="stylesheet" type="text/css" href="css/SuperBuilder_plain.css"></link>
	<link rel="stylesheet" type="text/css" href="css/plots.css">
	</link>
	<title>Deep Water Asteroid Impact</title>

	<!--Dependencies-->
	<script src="cvlibd/lib/d3.min.js"></script>
	<script src="cvlibd/lib/ElementQueries.js"></script>
	<script src="cvlibd/lib/ResizeSensor.js"></script>

	<!--CVLIB-D-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="cvlibd/js/cvlibD.js"></script>
	<script src="cvlibd/js/SuperBuilder.js"></script>
	<script src="cvlibd/js/SuperLoader.js"></script>
	<script src="cvlibd/js/plots.js"></script>
</head>
<style>
	#sidebar {
		position: fixed;
		top: 0px;
		bottom: 0px;
		left: 0px;
		width: 320px;
		overflow: auto;
	}

	h1 {
		border-bottom: 1px solid black;
	}

	#selections {
		margin: 5px;
		padding: 3px;
		border: 1px solid black;
		margin-top: 15px;
	}

	#outputs {
		margin-left: 375px;
	}

</style>

<body>
	<div id="gradient"></div>
	<div id="sidebar">

		<div id="selections">
			<select id="databaseSelect" onchange="loadCurrentDb()">
				<option value="cvlibd/server/data/volume-render/parameters_prs.json">Volume Render: Pressure</option>
				<option value="cvlibd/server/data/volume-render/parameters.json">Volume Render: Temperature, Astroid, Water</option>
		
			</select>
			<br>
			<select id="displaySelect" onchange="activateCurrentDisplay()"></select>
		</div>
		<div id="inputs"></div>
	</div>
	<div id="outputs"></div>
	<div id="legends"></div>
	<div class="plots-wrapper">
		<h3>Temperature, asteroid volume and water pressure over time.</h3>
		<div id="plots">
			<div id="tev"></div>
			<div id="v03"></div>
			<div id="prs"></div>
		</div>
		<div id="plots2">
			<div id="tev_max"></div>
			<div id="v03_max"></div>
			<div id="prs_max"></div>
		</div>
	</div>
	<div class="heatplot-container"> 
		<div class="heatplot-wrapper">
			<h3>Analysis of temperature with vtk clipping</h3>
			<div class="grids">
				<div class="heatplot-item">
					<img src="GIFS/tev_22010.gif" alt="GIF">
				</div>
				<div class="heatplot-vti-image">
					<img src="GIFS/tev_slices.gif" alt="heatplot-vti-image"/>
				</div>
			</div>
		</div>

		<hr class="hr"></hr>

	</div>
</body>
<script>
	//Variable declarations
	var currentDb;
	var currentDisplay;
	var inputs = document.getElementById("inputs");
	var outputs = document.getElementById("outputs");
	var databaseSelect = document.getElementById('databaseSelect');
	var displaySelect = document.getElementById('displaySelect');

	//Load first database
	loadCurrentDb();

	//Set the current database to what is selected 
	//and call doneLoading when it has finished loading
	function loadCurrentDb() {
		currentDb = new CVLIBD.Database(databaseSelect.value, doneLoading);

		var content = document.getElementById("outputs");
		if (databaseSelect.value == "cvlibd/server/data/volume-render/parameters.json") {
			content.setAttribute("class", "normal_content")
		}
		else {
			content.setAttribute("class", "prs_content");
		}


	}

	//Add SuperLoader and SuperBuilder to database, populate 
	//display selection with the databases' displays.
	function doneLoading() {
		currentDb.setLoadersForAll(SUPERLOADER);
		currentDb.addBuildersToAll(SUPERBUILDER);

		displaySelect.innerHTML = '';
		for (var key in currentDb.displays) {
			var display = currentDb.displays[key];
			var newOption = document.createElement('option');
			newOption.setAttribute('value', key);
			newOption.innerText = display.label ? display.label : key;
			displaySelect.appendChild(newOption);
		}
		
		activateCurrentDisplay();
		
	}


	//Set the current display. Clear the current contents and 
	//add structures from new display.
	function activateCurrentDisplay() {
		inputs.innerHTML = '';
		outputs.innerHTML = '';

		currentDisplay = currentDb.displays[displaySelect.value];
		//Activating a display loads the source and builds structures
		currentDisplay.activate();

		for (var key in currentDisplay.inputs) {
			inputs.appendChild(currentDisplay.inputs[key].content);
			inputs.appendChild(document.createElement('br'));
		}
		for (var key in currentDisplay.outputs) {
			outputs.appendChild(currentDisplay.outputs[key].content);
		}

	}

	// var prevScrollpos = window.pageYOffset;
	window.onscroll = function () {
		var currentScrollPos = window.pageYOffset;
		if (currentScrollPos > 400) {
			document.getElementById("legends").style.opacity = "0";
			document.getElementById("selections").style.opacity = "0";
			document.getElementById("inputs").style.opacity = "0";
		} else {
			document.getElementById("legends").style.opacity = "1";
			document.getElementById("selections").style.opacity = "1";
			document.getElementById("inputs").style.opacity = "1";
		}
		// prevScrollpos = currentScrollPos;
	}


</script>


</html>